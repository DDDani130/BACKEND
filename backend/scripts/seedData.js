import mongoose from 'mongoose';
import dotenv from 'dotenv';
import Tip from '../models/Tip.js';

dotenv.config();

// Conectar a MongoDB
mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/livelevelup', {
  useNewUrlParser: true,
  useUnifiedTopology: true,
})
.then(() => {
  console.log('‚úÖ Conectado a MongoDB para poblar datos');
})
.catch((error) => {
  console.error('‚ùå Error conectando a MongoDB:', error);
  process.exit(1);
});

// Datos iniciales de tips
const initialTips = [
  // Tips de Salud
  {
    title: 'Bebe 8 vasos de agua al d√≠a',
    content: 'Mantenerte hidratado es fundamental para tu salud. El agua ayuda a transportar nutrientes, eliminar toxinas y mantener la temperatura corporal.',
    category: 'salud',
    subcategory: 'nutricion',
    impact: {
      health: 15,
      planet: 0
    },
    difficulty: 'facil',
    timeRequired: 'diario',
    icon: 'üíß',
    tags: ['hidrataci√≥n', 'agua', 'salud', 'nutrici√≥n'],
    isActive: true,
    isFeatured: true,
    source: {
      name: 'OMS',
      url: 'https://www.who.int/'
    }
  },
  {
    title: 'Come 5 porciones de frutas y verduras',
    content: 'Las frutas y verduras son ricas en vitaminas, minerales y fibra. Ayudan a prevenir enfermedades cr√≥nicas y mantener un peso saludable.',
    category: 'salud',
    subcategory: 'nutricion',
    impact: {
      health: 20,
      planet: 5
    },
    difficulty: 'moderado',
    timeRequired: 'diario',
    icon: 'üçé',
    tags: ['nutrici√≥n', 'frutas', 'verduras', 'vitaminas'],
    isActive: true,
    isFeatured: true,
    source: {
      name: 'OMS',
      url: 'https://www.who.int/'
    }
  },
  {
    title: 'Ejercicio moderado 30 minutos',
    content: 'El ejercicio regular fortalece el coraz√≥n, mejora la circulaci√≥n y libera endorfinas que mejoran tu estado de √°nimo.',
    category: 'salud',
    subcategory: 'ejercicio',
    impact: {
      health: 25,
      planet: 0
    },
    difficulty: 'moderado',
    timeRequired: '30min',
    icon: 'üèÉ‚Äç‚ôÇÔ∏è',
    tags: ['ejercicio', 'cardio', 'salud', 'bienestar'],
    isActive: true,
    isFeatured: true,
    source: {
      name: 'OMS',
      url: 'https://www.who.int/'
    }
  },
  {
    title: 'Duerme 7-9 horas por noche',
    content: 'El sue√±o es esencial para la recuperaci√≥n del cuerpo y la mente. Mejora la memoria, el sistema inmune y el estado de √°nimo.',
    category: 'salud',
    subcategory: 'sue√±o',
    impact: {
      health: 30,
      planet: 0
    },
    difficulty: 'moderado',
    timeRequired: 'diario',
    icon: 'üò¥',
    tags: ['sue√±o', 'descanso', 'recuperaci√≥n', 'salud mental'],
    isActive: true,
    isFeatured: true,
    source: {
      name: 'National Sleep Foundation',
      url: 'https://www.sleepfoundation.org/'
    }
  },
  {
    title: 'Medita 10 minutos al d√≠a',
    content: 'La meditaci√≥n reduce el estr√©s, mejora la concentraci√≥n y promueve la paz mental. Es una pr√°ctica simple pero poderosa.',
    category: 'salud',
    subcategory: 'estres',
    impact: {
      health: 10,
      planet: 0
    },
    difficulty: 'facil',
    timeRequired: '15min',
    icon: 'üßò‚Äç‚ôÄÔ∏è',
    tags: ['meditaci√≥n', 'estr√©s', 'mindfulness', 'bienestar mental'],
    isActive: true,
    isFeatured: false,
    source: {
      name: 'Harvard Health',
      url: 'https://www.health.harvard.edu/'
    }
  },
  {
    title: 'Toma descansos regulares',
    content: 'Los descansos cortos durante el trabajo mejoran la productividad, reducen la fatiga y previenen problemas de visi√≥n.',
    category: 'salud',
    subcategory: 'estres',
    impact: {
      health: 8,
      planet: 0
    },
    difficulty: 'facil',
    timeRequired: '15min',
    icon: '‚è∞',
    tags: ['productividad', 'descanso', 'trabajo', 'salud ocular'],
    isActive: true,
    isFeatured: false,
    source: {
      name: 'Mayo Clinic',
      url: 'https://www.mayoclinic.org/'
    }
  },

  // Tips del Planeta
  {
    title: 'Usa transporte p√∫blico o bicicleta',
    content: 'El transporte p√∫blico reduce las emisiones de CO2 en un 45% comparado con el coche privado. La bicicleta es a√∫n m√°s ecol√≥gica.',
    category: 'planeta',
    subcategory: 'transporte',
    impact: {
      health: 15,
      planet: 25
    },
    difficulty: 'moderado',
    timeRequired: 'diario',
    icon: 'üöå',
    tags: ['transporte', 'CO2', 'sostenibilidad', 'aire limpio'],
    isActive: true,
    isFeatured: true,
    source: {
      name: 'EPA',
      url: 'https://www.epa.gov/'
    }
  },
  {
    title: 'Recicla papel, pl√°stico y vidrio',
    content: 'Reciclar una tonelada de papel salva 17 √°rboles y ahorra 26,500 litros de agua. Cada material reciclado reduce la contaminaci√≥n.',
    category: 'planeta',
    subcategory: 'reciclaje',
    impact: {
      health: 0,
      planet: 20
    },
    difficulty: 'facil',
    timeRequired: '5min',
    icon: '‚ôªÔ∏è',
    tags: ['reciclaje', 'residuos', '√°rboles', 'agua'],
    isActive: true,
    isFeatured: true,
    source: {
      name: 'EPA',
      url: 'https://www.epa.gov/'
    }
  },
  {
    title: 'Apaga las luces cuando salgas',
    content: 'Apagar las luces innecesarias puede ahorrar hasta 15% en tu factura de electricidad y reducir las emisiones de CO2.',
    category: 'planeta',
    subcategory: 'energia',
    impact: {
      health: 0,
      planet: 10
    },
    difficulty: 'facil',
    timeRequired: '5min',
    icon: 'üí°',
    tags: ['energ√≠a', 'electricidad', 'ahorro', 'CO2'],
    isActive: true,
    isFeatured: false,
    source: {
      name: 'Energy.gov',
      url: 'https://www.energy.gov/'
    }
  },
  {
    title: 'Compra productos locales',
    content: 'Los productos locales viajan menos distancia, reduciendo las emisiones de transporte y apoyando la econom√≠a local.',
    category: 'planeta',
    subcategory: 'biodiversidad',
    impact: {
      health: 5,
      planet: 15
    },
    difficulty: 'moderado',
    timeRequired: '15min',
    icon: 'üõí',
    tags: ['local', 'transporte', 'econom√≠a', 'fresco'],
    isActive: true,
    isFeatured: false,
    source: {
      name: 'USDA',
      url: 'https://www.usda.gov/'
    }
  },
  {
    title: 'Reduce el uso de pl√°sticos desechables',
    content: 'Los pl√°sticos de un solo uso tardan hasta 500 a√±os en degradarse. Usa botellas reutilizables y bolsas de tela.',
    category: 'planeta',
    subcategory: 'reciclaje',
    impact: {
      health: 0,
      planet: 18
    },
    difficulty: 'moderado',
    timeRequired: 'diario',
    icon: 'ü•§',
    tags: ['pl√°stico', 'desechable', 'oc√©anos', 'contaminaci√≥n'],
    isActive: true,
    isFeatured: true,
    source: {
      name: 'UN Environment',
      url: 'https://www.unenvironment.org/'
    }
  },
  {
    title: 'Planta un √°rbol o cuida plantas',
    content: 'Un √°rbol absorbe hasta 22kg de CO2 al a√±o y produce ox√≠geno para 4 personas. Las plantas tambi√©n mejoran la calidad del aire interior.',
    category: 'planeta',
    subcategory: 'biodiversidad',
    impact: {
      health: 5,
      planet: 30
    },
    difficulty: 'moderado',
    timeRequired: '30min',
    icon: 'üå≥',
    tags: ['√°rboles', 'CO2', 'ox√≠geno', 'aire limpio'],
    isActive: true,
    isFeatured: true,
    source: {
      name: 'Arbor Day Foundation',
      url: 'https://www.arborday.org/'
    }
  },
  {
    title: 'Usa electrodom√©sticos eficientes',
    content: 'Los electrodom√©sticos con etiqueta energ√©tica A+++ consumen hasta 70% menos energ√≠a que los modelos antiguos.',
    category: 'planeta',
    subcategory: 'energia',
    impact: {
      health: 0,
      planet: 20
    },
    difficulty: 'dificil',
    timeRequired: '1hora',
    icon: '‚ö°',
    tags: ['energ√≠a', 'eficiencia', 'electrodom√©sticos', 'ahorro'],
    isActive: true,
    isFeatured: false,
    source: {
      name: 'Energy Star',
      url: 'https://www.energystar.gov/'
    }
  },

  // Tips Generales
  {
    title: 'Practica la gratitud diaria',
    content: 'Escribir 3 cosas por las que est√©s agradecido cada d√≠a mejora el bienestar mental y reduce el estr√©s.',
    category: 'general',
    subcategory: 'bienestar',
    impact: {
      health: 12,
      planet: 0
    },
    difficulty: 'facil',
    timeRequired: '15min',
    icon: 'üôè',
    tags: ['gratitud', 'bienestar mental', 'estr√©s', 'positividad'],
    isActive: true,
    isFeatured: false,
    source: {
      name: 'Psychology Today',
      url: 'https://www.psychologytoday.com/'
    }
  },
  {
    title: 'Aprende algo nuevo cada d√≠a',
    content: 'El aprendizaje continuo mantiene tu mente activa, mejora la memoria y puede abrir nuevas oportunidades.',
    category: 'general',
    subcategory: 'productividad',
    impact: {
      health: 8,
      planet: 0
    },
    difficulty: 'facil',
    timeRequired: '15min',
    icon: 'üìö',
    tags: ['aprendizaje', 'mente', 'memoria', 'crecimiento'],
    isActive: true,
    isFeatured: false,
    source: {
      name: 'Harvard Health',
      url: 'https://www.health.harvard.edu/'
    }
  },
  {
    title: 'Conecta con la naturaleza',
    content: 'Pasar tiempo en la naturaleza reduce el estr√©s, mejora el estado de √°nimo y aumenta la creatividad.',
    category: 'general',
    subcategory: 'bienestar',
    impact: {
      health: 15,
      planet: 5
    },
    difficulty: 'facil',
    timeRequired: '30min',
    icon: 'üåø',
    tags: ['naturaleza', 'estr√©s', 'bienestar', 'aire libre'],
    isActive: true,
    isFeatured: false,
    source: {
      name: 'Nature',
      url: 'https://www.nature.com/'
    }
  },
  {
    title: 'Ayuda a otros',
    content: 'Ayudar a otros no solo beneficia a quien recibe la ayuda, sino que tambi√©n mejora tu propio bienestar y sentido de prop√≥sito.',
    category: 'general',
    subcategory: 'social',
    impact: {
      health: 10,
      planet: 5
    },
    difficulty: 'moderado',
    timeRequired: '1hora',
    icon: 'ü§ù',
    tags: ['ayuda', 'comunidad', 'bienestar', 'prop√≥sito'],
    isActive: true,
    isFeatured: false,
    source: {
      name: 'Greater Good Science Center',
      url: 'https://greatergood.berkeley.edu/'
    }
  }
];

// Funci√≥n para poblar la base de datos
const seedDatabase = async () => {
  try {
    console.log('üå± Iniciando poblaci√≥n de datos...');

    // Limpiar datos existentes
    await Tip.deleteMany({});
    console.log('üóëÔ∏è Datos existentes eliminados');

    // Insertar nuevos datos
    const createdTips = await Tip.insertMany(initialTips);
    console.log(`‚úÖ ${createdTips.length} tips creados exitosamente`);

    // Mostrar estad√≠sticas
    const totalTips = await Tip.countDocuments();
    const featuredTips = await Tip.countDocuments({ isFeatured: true });
    const healthTips = await Tip.countDocuments({ category: 'salud' });
    const planetTips = await Tip.countDocuments({ category: 'planeta' });
    const generalTips = await Tip.countDocuments({ category: 'general' });

    console.log('\nüìä Estad√≠sticas de la base de datos:');
    console.log(`üìù Total de tips: ${totalTips}`);
    console.log(`‚≠ê Tips destacados: ${featuredTips}`);
    console.log(`üè• Tips de salud: ${healthTips}`);
    console.log(`üåç Tips del planeta: ${planetTips}`);
    console.log(`üí° Tips generales: ${generalTips}`);

    console.log('\nüéâ Poblaci√≥n de datos completada exitosamente!');
    process.exit(0);
  } catch (error) {
    console.error('‚ùå Error poblando la base de datos:', error);
    process.exit(1);
  }
};

// Ejecutar el script
seedDatabase(); 